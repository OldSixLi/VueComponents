import Template from"./../layout/notice/PopBar.vue";let globalOptions={title:"提示",message:"提示内容",direction:"right"},instance;const Notify=function(config={}){let Tpl=this.extend(Template);instance=new Tpl,config=Object.assign({},globalOptions,config);for(const key in config)config.hasOwnProperty(key)&&(instance.$data[key]=config[key]);var $content;return 0==$("."+config.direction+"NotifyContent").length&&$("body").append('<div class="'+config.direction+'NotifyContent"></div>'),$("."+config.direction+"NotifyContent").append(instance.$mount().$el),instance.$data.visible=!0,instance};export default{install(Vue){Vue.prototype.$notify=Notify.bind(Vue),Vue.prototype.$notifyMessage=function(message,duration){return Vue.prototype.$notify({message:message,duration:null==duration?5e3:duration})},Vue.prototype.$notifyMessageLeft=function(message,duration){return Vue.prototype.$notify({direction:"left",message:message,duration:null==duration?5e3:duration})},Vue.prototype.$ajax=function(option){return new Promise((resolve,reject)=>{$.ajax({type:option.type||"POST",url:option.url||"",data:option.data,dataType:"json",success:function(data,textStatus,jqXHR){null!=data&&""!=data?resolve(data):(reject(),Vue.prototype.$notifyMessage("未请求到数据"))},error:function(response){reject(),Vue.prototype.$notifyMessage("请求服务失败,请重试!")},complete:function(xhr,textStatus){option.complete&&option.complete()}})})}}};